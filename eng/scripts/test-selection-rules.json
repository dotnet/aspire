{
  "$schema": "./test-selection-rules.schema.json",

  "ignorePaths": [
    ".editorconfig",
    ".gitignore",
    "*.md",
    "docs/**",
    "eng/common/**",
    "eng/pipelines/**",
    ".github/workflows/**",
    ".github/actions/**",
    "tests/agent-scenarios/**",
    "eng/scripts/test-selection-rules.json",
    "eng/scripts/test-selection-rules.schema.json",
    "tests/Aspire.Infrastructure.Tests/**",
    "Aspire.slnx",
    "src/Grafana/**",
    "src/Schema/**"
  ],

  "triggerAllPaths": [
    "global.json",
    "Directory.Build.props",
    "Directory.Build.targets",
    "Directory.Packages.props",
    "NuGet.config",
    "tests/Shared/**",
    "*.sln",
    "*.slnx",
    "src/Aspire.Hosting/**"
  ],

  "testProjectPatterns": {
    "include": ["tests/**/*.csproj"],
    "exclude": ["tests/testproject/**"]
  },

  "sourceToTestMappings": [
    {
      "source": "src/Components/{name}/**",
      "test": "tests/{name}.Tests/"
    },
    {
      "source": "src/Aspire.Hosting.{name}/**",
      "test": "tests/Aspire.Hosting.{name}.Tests/"
    },
    {
      "source": "tests/{name}.Tests/**",
      "test": "tests/{name}.Tests/"
    },
    {
      "source": "tools/Aspire.TestSelector/**",
      "test": "tests/Aspire.TestSelector.Tests/"
    },
    {
      "source": "playground/**",
      "test": "tests/Aspire.Playground.Tests/"
    },
    {
      "source": "src/Tools/ConfigurationSchemaGenerator/**",
      "test": "tests/ConfigurationSchemaGenerator.Tests/"
    }
  ],

  "categories": {
    "templates": {
      "description": "Template tests - runs on 3 platforms",
      "triggerPaths": [
        "src/Aspire.ProjectTemplates/**",
        "tests/Aspire.Templates.Tests/**",
        "tests/Shared/**"
      ]
    },

    "cli_e2e": {
      "description": "CLI end-to-end tests",
      "triggerPaths": [
        "src/Aspire.Cli/**",
        "eng/clipack/**",
        "tests/Aspire.Cli.EndToEnd.Tests/**"
      ]
    },

    "endtoend": {
      "description": "General E2E tests",
      "triggerPaths": [
        "tests/Aspire.EndToEnd.Tests/**"
      ]
    },

    "extension": {
      "description": "VS Code extension tests",
      "triggerPaths": [
        "extension/**"
      ]
    },

    "playground": {
      "description": "Playground tests",
      "triggerPaths": [
        "playground/**"
      ]
    },

    "polyglot": {
      "description": "Polyglot SDK validation tests",
      "triggerPaths": [
        ".github/workflows/polyglot-validation/**",
        ".github/workflows/polyglot-validation.yml"
      ]
    },

    "integrations": {
      "description": "Integration tests for components, dashboard, and hosting extensions",
      "triggerPaths": [
        "src/Aspire.Dashboard/**",
        "src/Aspire.Hosting.*/**",
        "src/Aspire.*/**",
        "src/Components/**",
        "src/Shared/**",
        "src/Vendoring/**",
        "tests/Aspire.*.Tests/**"
      ],
      "excludePaths": [
        "src/Aspire.ProjectTemplates/**",
        "src/Aspire.Cli/**",
        "src/Aspire.Hosting/**",
        "tests/Aspire.Templates.Tests/**",
        "tests/Aspire.Cli.EndToEnd.Tests/**",
        "tests/Aspire.EndToEnd.Tests/**"
      ]
    }
  }
}
