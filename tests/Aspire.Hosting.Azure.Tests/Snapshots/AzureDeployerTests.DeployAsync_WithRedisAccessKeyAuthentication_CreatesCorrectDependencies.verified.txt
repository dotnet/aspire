[  
PIPELINE DEPENDENCY GRAPH DIAGNOSTICS
=====================================

This diagnostic output shows the complete pipeline dependency graph structure.
Use this to understand step relationships and troubleshoot execution issues.

Total steps defined: 36

Analysis for full pipeline execution (showing all steps and their relationships)

EXECUTION ORDER
===============
This shows the order in which steps would execute, respecting all dependencies.
Steps with no dependencies run first, followed by steps that depend on them.

  1. process-parameters
  2. build-prereq
  3. deploy-prereq
  4. build-api
  5. build
  6. validate-azure-login
  7. create-provisioning-context
  8. check-api-exists
  9. provision-api-identity
 10. provision-cache-kv
 11. provision-cache
 12. provision-cosmos-kv
 13. provision-cosmos
 14. provision-env-acr
 15. provision-env
 16. provision-pg-kv
 17. provision-pg
 18. login-to-acr-env-acr
 19. push-prereq
 20. push-api
 21. update-api-provisionable-resource
 22. provision-api-website
 23. print-api-summary
 24. provision-api-roles-cache-kv
 25. provision-api-roles-cosmos-kv
 26. provision-api-roles-pg-kv
 27. provision-azure-bicep-resources
 28. print-dashboard-url-env
 29. deploy
 30. deploy-api
 31. diagnostics
 32. publish-prereq
 33. publish-azure634f9
 34. publish
 35. publish-manifest
 36. push

DETAILED STEP ANALYSIS
======================
Shows each step's dependencies, associated resources, tags, and descriptions.
✓ = dependency exists, ? = dependency missing

Step: build
    Description: Aggregation step for all build operations. All build steps should be required by this step.
    Dependencies: ✓ build-api

Step: build-api
    Description: Builds the container image for the api project.
    Dependencies: ✓ build-prereq, ✓ deploy-prereq
    Resource: api (ProjectResource)
    Tags: build-compute

Step: build-prereq
    Description: Prerequisite step that runs before any build operations.
    Dependencies: ✓ process-parameters

Step: check-api-exists
    Dependencies: ✓ create-provisioning-context
    Resource: api-website (AzureAppServiceWebSiteResource)
    Tags: check-website-exists

Step: create-provisioning-context
    Description: Creates the Azure provisioning context for infrastructure deployment.
    Dependencies: ✓ deploy-prereq, ✓ validate-azure-login
    Resource: azure634f9 (AzureEnvironmentResource)

Step: deploy
    Description: Aggregation step for all deploy operations. All deploy steps should be required by this step.
    Dependencies: ✓ build-api, ✓ create-provisioning-context, ✓ print-api-summary, ✓ print-dashboard-url-env, ✓ provision-azure-bicep-resources, ✓ validate-azure-login

Step: deploy-api
    Description: Aggregation step for deploying api to Azure App Service.
    Dependencies: ✓ print-api-summary
    Resource: api-website (AzureAppServiceWebSiteResource)
    Tags: deploy-compute

Step: deploy-prereq
    Description: Prerequisite step that runs before any deploy operations. Initializes deployment environment and manages deployment state.
    Dependencies: ✓ process-parameters

Step: diagnostics
    Description: Dumps dependency graph information for troubleshooting pipeline execution.
    Dependencies: none

Step: login-to-acr-env-acr
    Dependencies: ✓ provision-env-acr
    Resource: env-acr (AzureContainerRegistryResource)
    Tags: acr-login

Step: print-api-summary
    Description: Prints the deployment summary and URL for api.
    Dependencies: ✓ provision-api-website
    Resource: api-website (AzureAppServiceWebSiteResource)
    Tags: print-summary

Step: print-dashboard-url-env
    Description: Prints the deployment summary and dashboard URL for env.
    Dependencies: ✓ provision-azure-bicep-resources, ✓ provision-env
    Resource: env (AzureAppServiceEnvironmentResource)
    Tags: print-summary

Step: process-parameters
    Description: Prompts for parameter values before build, publish, or deployment operations.
    Dependencies: none

Step: provision-api-identity
    Description: Provisions the Azure Bicep resource api-identity using Azure infrastructure.
    Dependencies: ✓ create-provisioning-context
    Resource: api-identity (AzureUserAssignedIdentityResource)
    Tags: provision-infra

Step: provision-api-roles-cache-kv
    Description: Provisions the Azure Bicep resource api-roles-cache-kv using Azure infrastructure.
    Dependencies: ✓ create-provisioning-context, ✓ provision-api-identity, ✓ provision-cache-kv
    Resource: api-roles-cache-kv (AzureProvisioningResource)
    Tags: provision-infra

Step: provision-api-roles-cosmos-kv
    Description: Provisions the Azure Bicep resource api-roles-cosmos-kv using Azure infrastructure.
    Dependencies: ✓ create-provisioning-context, ✓ provision-api-identity, ✓ provision-cosmos-kv
    Resource: api-roles-cosmos-kv (AzureProvisioningResource)
    Tags: provision-infra

Step: provision-api-roles-pg-kv
    Description: Provisions the Azure Bicep resource api-roles-pg-kv using Azure infrastructure.
    Dependencies: ✓ create-provisioning-context, ✓ provision-api-identity, ✓ provision-pg-kv
    Resource: api-roles-pg-kv (AzureProvisioningResource)
    Tags: provision-infra

Step: provision-api-website
    Description: Provisions the Azure Bicep resource api-website using Azure infrastructure.
    Dependencies: ✓ create-provisioning-context, ✓ provision-api-identity, ✓ provision-cache, ✓ provision-cache-kv, ✓ provision-cosmos, ✓ provision-cosmos-kv, ✓ provision-env, ✓ provision-pg, ✓ provision-pg-kv, ✓ push-api, ✓ update-api-provisionable-resource
    Resource: api-website (AzureAppServiceWebSiteResource)
    Tags: provision-infra

Step: provision-azure-bicep-resources
    Description: Aggregation step for all Azure infrastructure provisioning operations.
    Dependencies: ✓ create-provisioning-context, ✓ deploy-prereq, ✓ provision-api-identity, ✓ provision-api-roles-cache-kv, ✓ provision-api-roles-cosmos-kv, ✓ provision-api-roles-pg-kv, ✓ provision-api-website, ✓ provision-cache, ✓ provision-cache-kv, ✓ provision-cosmos, ✓ provision-cosmos-kv, ✓ provision-env, ✓ provision-env-acr, ✓ provision-pg, ✓ provision-pg-kv
    Resource: azure634f9 (AzureEnvironmentResource)
    Tags: provision-infra

Step: provision-cache
    Description: Provisions the Azure Bicep resource cache using Azure infrastructure.
    Dependencies: ✓ create-provisioning-context, ✓ provision-cache-kv
    Resource: cache (AzureManagedRedisResource)
    Tags: provision-infra

Step: provision-cache-kv
    Description: Provisions the Azure Bicep resource cache-kv using Azure infrastructure.
    Dependencies: ✓ create-provisioning-context
    Resource: cache-kv (AzureKeyVaultResource)
    Tags: provision-infra

Step: provision-cosmos
    Description: Provisions the Azure Bicep resource cosmos using Azure infrastructure.
    Dependencies: ✓ create-provisioning-context, ✓ provision-cosmos-kv
    Resource: cosmos (AzureCosmosDBResource)
    Tags: provision-infra

Step: provision-cosmos-kv
    Description: Provisions the Azure Bicep resource cosmos-kv using Azure infrastructure.
    Dependencies: ✓ create-provisioning-context
    Resource: cosmos-kv (AzureKeyVaultResource)
    Tags: provision-infra

Step: provision-env
    Description: Provisions the Azure Bicep resource env using Azure infrastructure.
    Dependencies: ✓ create-provisioning-context, ✓ provision-env-acr
    Resource: env (AzureAppServiceEnvironmentResource)
    Tags: provision-infra

Step: provision-env-acr
    Description: Provisions the Azure Bicep resource env-acr using Azure infrastructure.
    Dependencies: ✓ create-provisioning-context
    Resource: env-acr (AzureContainerRegistryResource)
    Tags: provision-infra

Step: provision-pg
    Description: Provisions the Azure Bicep resource pg using Azure infrastructure.
    Dependencies: ✓ create-provisioning-context, ✓ provision-pg-kv
    Resource: pg (AzurePostgresFlexibleServerResource)
    Tags: provision-infra

Step: provision-pg-kv
    Description: Provisions the Azure Bicep resource pg-kv using Azure infrastructure.
    Dependencies: ✓ create-provisioning-context
    Resource: pg-kv (AzureKeyVaultResource)
    Tags: provision-infra

Step: publish
    Description: Aggregation step for all publish operations. All publish steps should be required by this step.
    Dependencies: ✓ publish-azure634f9

Step: publish-azure634f9
    Description: Publishes the Azure environment configuration for azure634f9.
    Dependencies: ✓ publish-prereq
    Resource: azure634f9 (AzureEnvironmentResource)

Step: publish-manifest
    Description: Publishes the Aspire application model as a JSON manifest file.
    Dependencies: none

Step: publish-prereq
    Description: Prerequisite step that runs before any publish operations.
    Dependencies: ✓ process-parameters

Step: push
    Description: Aggregation step for all push operations. All push steps should be required by this step.
    Dependencies: ✓ push-api, ✓ push-prereq

Step: push-api
    Dependencies: ✓ build-api, ✓ push-prereq
    Resource: api (ProjectResource)
    Tags: push-container-image

Step: push-prereq
    Description: Prerequisite step that runs before any push operations.
    Dependencies: ✓ login-to-acr-env-acr

Step: update-api-provisionable-resource
    Dependencies: ✓ check-api-exists, ✓ create-provisioning-context
    Resource: api-website (AzureAppServiceWebSiteResource)
    Tags: update-website-provisionable-resource

Step: validate-azure-login
    Description: Validates Azure CLI authentication before deployment.
    Dependencies: ✓ deploy-prereq
    Resource: azure634f9 (AzureEnvironmentResource)

POTENTIAL ISSUES:
Identifies problems in the pipeline configuration that could prevent execution.
─────────────────
INFO: Orphaned steps (no dependencies, not required by others):
   - diagnostics
   - publish-manifest

EXECUTION SIMULATION ("What If" Analysis):
Shows what steps would run for each possible target step and in what order.
Steps at the same level can run concurrently.
─────────────────────────────────────────────────────────────────────────────
If targeting 'build':
  Direct dependencies: build-api
  Total steps: 5
  Execution order:
    [0] process-parameters
    [1] build-prereq | deploy-prereq (parallel)
    [2] build-api
    [3] build

If targeting 'build-api':
  Direct dependencies: build-prereq, deploy-prereq
  Total steps: 4
  Execution order:
    [0] process-parameters
    [1] build-prereq | deploy-prereq (parallel)
    [2] build-api

If targeting 'build-prereq':
  Direct dependencies: process-parameters
  Total steps: 2
  Execution order:
    [0] process-parameters
    [1] build-prereq

If targeting 'check-api-exists':
  Direct dependencies: create-provisioning-context
  Total steps: 5
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context
    [4] check-api-exists

If targeting 'create-provisioning-context':
  Direct dependencies: deploy-prereq, validate-azure-login
  Total steps: 4
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context

If targeting 'deploy':
  Direct dependencies: build-api, create-provisioning-context, print-api-summary, print-dashboard-url-env, provision-azure-bicep-resources, validate-azure-login
  Total steps: 28
  Execution order:
    [0] process-parameters
    [1] build-prereq | deploy-prereq (parallel)
    [2] build-api | validate-azure-login (parallel)
    [3] create-provisioning-context
    [4] check-api-exists | provision-api-identity | provision-cache-kv | provision-cosmos-kv | provision-env-acr | provision-pg-kv (parallel)
    [5] login-to-acr-env-acr | provision-api-roles-cache-kv | provision-api-roles-cosmos-kv | provision-api-roles-pg-kv | provision-cache | provision-cosmos | provision-env | provision-pg | update-api-provisionable-resource (parallel)
    [6] push-prereq
    [7] push-api
    [8] provision-api-website
    [9] print-api-summary | provision-azure-bicep-resources (parallel)
    [10] print-dashboard-url-env
    [11] deploy

If targeting 'deploy-api':
  Direct dependencies: print-api-summary
  Total steps: 23
  Execution order:
    [0] process-parameters
    [1] build-prereq | deploy-prereq (parallel)
    [2] build-api | validate-azure-login (parallel)
    [3] create-provisioning-context
    [4] check-api-exists | provision-api-identity | provision-cache-kv | provision-cosmos-kv | provision-env-acr | provision-pg-kv (parallel)
    [5] login-to-acr-env-acr | provision-cache | provision-cosmos | provision-env | provision-pg | update-api-provisionable-resource (parallel)
    [6] push-prereq
    [7] push-api
    [8] provision-api-website
    [9] print-api-summary
    [10] deploy-api

If targeting 'deploy-prereq':
  Direct dependencies: process-parameters
  Total steps: 2
  Execution order:
    [0] process-parameters
    [1] deploy-prereq

If targeting 'diagnostics':
  Direct dependencies: none
  Total steps: 1
  Execution order:
    [0] diagnostics

If targeting 'login-to-acr-env-acr':
  Direct dependencies: provision-env-acr
  Total steps: 6
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context
    [4] provision-env-acr
    [5] login-to-acr-env-acr

If targeting 'print-api-summary':
  Direct dependencies: provision-api-website
  Total steps: 22
  Execution order:
    [0] process-parameters
    [1] build-prereq | deploy-prereq (parallel)
    [2] build-api | validate-azure-login (parallel)
    [3] create-provisioning-context
    [4] check-api-exists | provision-api-identity | provision-cache-kv | provision-cosmos-kv | provision-env-acr | provision-pg-kv (parallel)
    [5] login-to-acr-env-acr | provision-cache | provision-cosmos | provision-env | provision-pg | update-api-provisionable-resource (parallel)
    [6] push-prereq
    [7] push-api
    [8] provision-api-website
    [9] print-api-summary

If targeting 'print-dashboard-url-env':
  Direct dependencies: provision-azure-bicep-resources, provision-env
  Total steps: 26
  Execution order:
    [0] process-parameters
    [1] build-prereq | deploy-prereq (parallel)
    [2] build-api | validate-azure-login (parallel)
    [3] create-provisioning-context
    [4] check-api-exists | provision-api-identity | provision-cache-kv | provision-cosmos-kv | provision-env-acr | provision-pg-kv (parallel)
    [5] login-to-acr-env-acr | provision-api-roles-cache-kv | provision-api-roles-cosmos-kv | provision-api-roles-pg-kv | provision-cache | provision-cosmos | provision-env | provision-pg | update-api-provisionable-resource (parallel)
    [6] push-prereq
    [7] push-api
    [8] provision-api-website
    [9] provision-azure-bicep-resources
    [10] print-dashboard-url-env

If targeting 'process-parameters':
  Direct dependencies: none
  Total steps: 1
  Execution order:
    [0] process-parameters

If targeting 'provision-api-identity':
  Direct dependencies: create-provisioning-context
  Total steps: 5
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context
    [4] provision-api-identity

If targeting 'provision-api-roles-cache-kv':
  Direct dependencies: create-provisioning-context, provision-api-identity, provision-cache-kv
  Total steps: 7
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context
    [4] provision-api-identity | provision-cache-kv (parallel)
    [5] provision-api-roles-cache-kv

If targeting 'provision-api-roles-cosmos-kv':
  Direct dependencies: create-provisioning-context, provision-api-identity, provision-cosmos-kv
  Total steps: 7
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context
    [4] provision-api-identity | provision-cosmos-kv (parallel)
    [5] provision-api-roles-cosmos-kv

If targeting 'provision-api-roles-pg-kv':
  Direct dependencies: create-provisioning-context, provision-api-identity, provision-pg-kv
  Total steps: 7
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context
    [4] provision-api-identity | provision-pg-kv (parallel)
    [5] provision-api-roles-pg-kv

If targeting 'provision-api-website':
  Direct dependencies: create-provisioning-context, provision-api-identity, provision-cache, provision-cache-kv, provision-cosmos, provision-cosmos-kv, provision-env, provision-pg, provision-pg-kv, push-api, update-api-provisionable-resource
  Total steps: 21
  Execution order:
    [0] process-parameters
    [1] build-prereq | deploy-prereq (parallel)
    [2] build-api | validate-azure-login (parallel)
    [3] create-provisioning-context
    [4] check-api-exists | provision-api-identity | provision-cache-kv | provision-cosmos-kv | provision-env-acr | provision-pg-kv (parallel)
    [5] login-to-acr-env-acr | provision-cache | provision-cosmos | provision-env | provision-pg | update-api-provisionable-resource (parallel)
    [6] push-prereq
    [7] push-api
    [8] provision-api-website

If targeting 'provision-azure-bicep-resources':
  Direct dependencies: create-provisioning-context, deploy-prereq, provision-api-identity, provision-api-roles-cache-kv, provision-api-roles-cosmos-kv, provision-api-roles-pg-kv, provision-api-website, provision-cache, provision-cache-kv, provision-cosmos, provision-cosmos-kv, provision-env, provision-env-acr, provision-pg, provision-pg-kv
  Total steps: 25
  Execution order:
    [0] process-parameters
    [1] build-prereq | deploy-prereq (parallel)
    [2] build-api | validate-azure-login (parallel)
    [3] create-provisioning-context
    [4] check-api-exists | provision-api-identity | provision-cache-kv | provision-cosmos-kv | provision-env-acr | provision-pg-kv (parallel)
    [5] login-to-acr-env-acr | provision-api-roles-cache-kv | provision-api-roles-cosmos-kv | provision-api-roles-pg-kv | provision-cache | provision-cosmos | provision-env | provision-pg | update-api-provisionable-resource (parallel)
    [6] push-prereq
    [7] push-api
    [8] provision-api-website
    [9] provision-azure-bicep-resources

If targeting 'provision-cache':
  Direct dependencies: create-provisioning-context, provision-cache-kv
  Total steps: 6
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context
    [4] provision-cache-kv
    [5] provision-cache

If targeting 'provision-cache-kv':
  Direct dependencies: create-provisioning-context
  Total steps: 5
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context
    [4] provision-cache-kv

If targeting 'provision-cosmos':
  Direct dependencies: create-provisioning-context, provision-cosmos-kv
  Total steps: 6
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context
    [4] provision-cosmos-kv
    [5] provision-cosmos

If targeting 'provision-cosmos-kv':
  Direct dependencies: create-provisioning-context
  Total steps: 5
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context
    [4] provision-cosmos-kv

If targeting 'provision-env':
  Direct dependencies: create-provisioning-context, provision-env-acr
  Total steps: 6
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context
    [4] provision-env-acr
    [5] provision-env

If targeting 'provision-env-acr':
  Direct dependencies: create-provisioning-context
  Total steps: 5
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context
    [4] provision-env-acr

If targeting 'provision-pg':
  Direct dependencies: create-provisioning-context, provision-pg-kv
  Total steps: 6
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context
    [4] provision-pg-kv
    [5] provision-pg

If targeting 'provision-pg-kv':
  Direct dependencies: create-provisioning-context
  Total steps: 5
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context
    [4] provision-pg-kv

If targeting 'publish':
  Direct dependencies: publish-azure634f9
  Total steps: 4
  Execution order:
    [0] process-parameters
    [1] publish-prereq
    [2] publish-azure634f9
    [3] publish

If targeting 'publish-azure634f9':
  Direct dependencies: publish-prereq
  Total steps: 3
  Execution order:
    [0] process-parameters
    [1] publish-prereq
    [2] publish-azure634f9

If targeting 'publish-manifest':
  Direct dependencies: none
  Total steps: 1
  Execution order:
    [0] publish-manifest

If targeting 'publish-prereq':
  Direct dependencies: process-parameters
  Total steps: 2
  Execution order:
    [0] process-parameters
    [1] publish-prereq

If targeting 'push':
  Direct dependencies: push-api, push-prereq
  Total steps: 11
  Execution order:
    [0] process-parameters
    [1] build-prereq | deploy-prereq (parallel)
    [2] build-api | validate-azure-login (parallel)
    [3] create-provisioning-context
    [4] provision-env-acr
    [5] login-to-acr-env-acr
    [6] push-prereq
    [7] push-api
    [8] push

If targeting 'push-api':
  Direct dependencies: build-api, push-prereq
  Total steps: 10
  Execution order:
    [0] process-parameters
    [1] build-prereq | deploy-prereq (parallel)
    [2] build-api | validate-azure-login (parallel)
    [3] create-provisioning-context
    [4] provision-env-acr
    [5] login-to-acr-env-acr
    [6] push-prereq
    [7] push-api

If targeting 'push-prereq':
  Direct dependencies: login-to-acr-env-acr
  Total steps: 7
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context
    [4] provision-env-acr
    [5] login-to-acr-env-acr
    [6] push-prereq

If targeting 'update-api-provisionable-resource':
  Direct dependencies: check-api-exists, create-provisioning-context
  Total steps: 6
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login
    [3] create-provisioning-context
    [4] check-api-exists
    [5] update-api-provisionable-resource

If targeting 'validate-azure-login':
  Direct dependencies: deploy-prereq
  Total steps: 3
  Execution order:
    [0] process-parameters
    [1] deploy-prereq
    [2] validate-azure-login


]