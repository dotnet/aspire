@namespace Aspire.Dashboard.Components

@using Aspire.Dashboard.Components.Dialogs
@using Aspire.Dashboard.Resources

@inject IStringLocalizer<ControlsStrings> Loc

@if (!string.IsNullOrWhiteSpace(ExceptionText))
{
    <FluentButton Appearance="Appearance.Lightweight"
                  OnClick="OnExceptionDetailsClickedAsync"
                  Title="@Loc[nameof(ControlsStrings.ExceptionDetailsTitle)]"
                  Class="exception-details-button">
        <FluentIcon Icon="Icons.Filled.Size16.DocumentError"
                    Color="Color.Accent" />
    </FluentButton>
}

@code {
    [Parameter, EditorRequired]
    public required string ExceptionText { get; set; }

    [Inject]
    public required DashboardDialogService DialogService { get; init; }

    private async Task OnExceptionDetailsClickedAsync()
    {
        await TextVisualizerDialog.OpenDialogAsync(new OpenTextVisualizerDialogOptions
        {
            DialogService = DialogService,
            ValueDescription = Loc[nameof(ControlsStrings.ExceptionDetailsTitle)],
            Value = ExceptionText
        });
    }
}
