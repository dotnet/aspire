@using Aspire.Dashboard.Otlp.Model
@using Aspire.Dashboard.Model.Otlp
@using Aspire.Dashboard.Resources
@using Aspire.Dashboard.Model

@inject IStringLocalizer<ControlsStrings> Loc

@* Allows long values to be viewed in option popup by adding a tooltip to options. *@
@* Better improvements could come from new FluentUI features. See https://github.com/microsoft/fluentui-blazor/issues/4136 *@
<FluentStack Orientation="Orientation.Horizontal" HorizontalGap="3" title="@(ViewModel.Name?.Length > 30 ? ViewModel.Name : null)">
    @if (ViewModel.Id?.Type is OtlpResourceType.ResourceGrouping)
    {
        <FluentIcon Icon="Icons.Regular.Size20.AppsList"
                    Color="Color.Accent"
                    Style="vertical-align: text-bottom;"/>
        <span>@ViewModel.Name (<span class="resource-select-resource-label">@Loc[nameof(ControlsStrings.ApplicationLower)]</span>)</span>
    }
    else if (ViewModel.Id?.Type is OtlpResourceType.Instance)
    {
        <FluentIcon Icon="Icons.Regular.Size20.ArrowTurnDownRight"
                    Color="Color.Accent"
                    Style="vertical-align: text-bottom;" />
        <span aria-label="@string.Format(@Loc[nameof(ControlsStrings.ResourceDropdownReplicaAccessibleTitle)], ViewModel.Name, ViewModel.Id.ReplicaSetName)">@ViewModel.Name</span>
    }
    else
    {
        @ViewModel.Name
    }
</FluentStack>

@code {
    [Parameter, EditorRequired]
    public required SelectViewModel<ResourceTypeDetails> ViewModel { get; set; }
}
