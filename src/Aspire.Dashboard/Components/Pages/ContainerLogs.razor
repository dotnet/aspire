@page "/ContainerLogs/{containername?}"
@using Aspire.Dashboard.Model
@inherits ResourceLogsBase<ContainerViewModel>

@{
    base.BuildRenderTree(__builder);
}

@code {
    [Parameter]
    public string? ContainerName { get; set; }

    protected override string? ResourceName => ContainerName;
    protected override string ResourceType => "Container";
    protected override string LoadingResourcesMessage => LogStatus.LoadingContainers;
    protected override string NoResourceSelectedMessage => LogStatus.NoContainerSelected;
    protected override string LogsNotAvailableMessage => LogStatus.FailedToInitialize;
    protected override string UrlPrefix => "/ContainerLogs";

    protected override Task<List<ContainerViewModel>> GetResources(IDashboardViewModelService dashboardViewModelService)
        => dashboardViewModelService.GetContainersAsync();

    protected override IAsyncEnumerable<ResourceChanged<ContainerViewModel>> WatchResources(IDashboardViewModelService dashboardViewModelService, IEnumerable<NamespacedName>? initialList, CancellationToken cancellationToken)
        => dashboardViewModelService.WatchContainersAsync(initialList, cancellationToken);
}
